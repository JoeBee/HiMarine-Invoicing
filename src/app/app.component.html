<div class="app-container">
    <header>
        <!-- Main Navigation Row -->
        <nav class="nav-tabs main-nav">
            <a (click)="onMainTabClick('suppliers')" [class.active]="activeMainTab === 'suppliers'">Suppliers</a>
            <a (click)="onMainTabClick('invoicing')" [class.active]="activeMainTab === 'invoicing'">Invoicing (Under
                Construction)</a>
            <a (click)="onMainTabClick('history')" [class.active]="activeMainTab === 'history'">History</a>
        </nav>

        <!-- Sub Navigation Row - Suppliers -->
        <nav class="nav-tabs sub-nav" *ngIf="activeMainTab === 'suppliers'">
            <a routerLink="/suppliers/supplier-docs" routerLinkActive="active">Supplier Docs</a>
            <a routerLink="/suppliers/price-list" routerLinkActive="active">Price List</a>
        </nav>

        <!-- Sub Navigation Row - Invoicing -->
        <nav class="nav-tabs sub-nav" *ngIf="activeMainTab === 'invoicing'">
            <a routerLink="/invoicing/captains-request" routerLinkActive="active">Captain's Request</a>
            <a routerLink="/invoicing/process-data" routerLinkActive="active">Process Data</a>
            <a routerLink="/invoicing/invoice" routerLinkActive="active">Invoice</a>
        </nav>
    </header>

    <div class="info-icon" (click)="openInfoModal()">
        &#9432;
    </div>

    <div class="modal-overlay" *ngIf="showInfoModal" (click)="closeInfoModal()">
        <div class="modal" (click)="$event.stopPropagation()">
            <button class="modal-close" (click)="closeInfoModal()" aria-label="Close modal">&times;</button>
            <h2>User Instructions</h2>

            <h3>Suppliers Docs Tab</h3>
            <ul>
                <li>Drag and drop Excel files into the drop zone to upload them</li>
                <li>You can upload files individually or multiple files at once</li>
                <li>The system will automatically read each file and extract:
                    <ul>
                        <li>File name (without extension)</li>
                        <li>Top left cell where the data table starts</li>
                        <li>Column letter containing the description data</li>
                        <li>Column letter containing the price data</li>
                    </ul>
                </li>
                <li>All uploaded files will be displayed in a table for review</li>
            </ul>

            <h3>Process Data Tab</h3>
            <ul>
                <li>Click the "Process Supplier Files" button once files are uploaded</li>
                <li>The system will read all Excel files and extract description and price data</li>
                <li>Data will be sorted by description first, then by price (low to high)</li>
                <li>Review the processed data in the table</li>
                <li><strong>Click on any row</strong> to view the original data from the Excel file with all column
                    headers</li>
                <li>Click away from the table to close the expanded view</li>
                <li>Use the count dropdown to select quantities for each item</li>
                <li>Use the filter controls to narrow down results by file name, description, or search text</li>
                <li>Sort columns by clicking on the column headers</li>
            </ul>

            <h3>Invoice Tab</h3>
            <ul>
                <li>Click "Generate Invoice" to create an Excel workbook</li>
                <li>Only items with a count greater than 0 will be included in the invoice</li>
                <li>The generated Excel file will be downloaded to your computer</li>
                <li>Review the invoice summary before generating</li>
            </ul>

            <h3>History Tab</h3>
            <ul>
                <li>This tab is a placeholder for future functionality</li>
            </ul>

            <h3>New Features</h3>
            <ul>
                <li><strong>Expandable Rows:</strong> Click on any row in the Process Data table to view the complete
                    original data from the Excel file</li>
                <li><strong>Original Data View:</strong> See all columns and headers exactly as they appear in the
                    source Excel file</li>
                <li><strong>Enhanced Filtering:</strong> Filter by file name, description, or search for specific text
                </li>
                <li><strong>Column Sorting:</strong> Click column headers to sort data in ascending or descending order
                </li>
                <li><strong>Quantity Selection:</strong> Use dropdown menus to select quantities for each item</li>
            </ul>

            <button class="primary close-button" (click)="closeInfoModal()">Close</button>
        </div>
    </div>

    <main class="container">
        <router-outlet></router-outlet>
    </main>
</div>