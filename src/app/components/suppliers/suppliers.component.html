<div class="suppliers-container">
    <h1>Suppliers</h1>

    <div class="action-buttons" *ngIf="supplierFiles.length > 0">
        <button class="secondary clear-button" (click)="clearAllFiles()">
            Clear All Files
        </button>
    </div>

    <div class="drop-zone" [class.drag-over]="isDragging" (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)" (drop)="onDrop($event)" (click)="triggerFileInput()">
        <div class="icon">üìÅ</div>
        <p><strong>Drag and drop XLSX files here</strong></p>
        <p>or click to browse</p>
        <input type="file" id="fileInput" multiple accept=".xlsx,.xls" (change)="onFileSelect($event)"
            style="display: none;">
    </div>

    <div *ngIf="isProcessing" class="processing-message">
        <p>Processing files...</p>
    </div>

    <div *ngIf="supplierFiles.length > 0" class="files-table">
        <h2>Uploaded Files</h2>
        <table>
            <thead>
                <tr>
                    <th class="sortable-header" (click)="sortData('fileName')">
                        File Name {{ getSortIcon('fileName') }}
                    </th>
                    <th class="sortable-header" (click)="sortData('topLeftCell')">
                        Top Left Cell {{ getSortIcon('topLeftCell') }}
                    </th>
                    <th class="sortable-header" (click)="sortData('descriptionColumn')">
                        Description Column {{ getSortIcon('descriptionColumn') }}
                    </th>
                    <th class="sortable-header" (click)="sortData('priceColumn')">
                        Price Column {{ getSortIcon('priceColumn') }}
                    </th>
                    <th class="sortable-header" (click)="sortData('rowCount')">
                        Row Count {{ getSortIcon('rowCount') }}
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let file of supplierFiles">
                    <td>{{ file.fileName }}</td>
                    <td [class.not-found]="file.topLeftCell === 'NOT FOUND'">{{ file.topLeftCell }}</td>
                    <td [class.not-found]="file.descriptionColumn === 'NOT FOUND'">{{
                        file.descriptionHeader || file.descriptionColumn }}</td>
                    <td [class.not-found]="file.priceColumn === 'NOT FOUND'">{{ file.priceHeader
                        || file.priceColumn }}</td>
                    <td>{{ file.rowCount }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>